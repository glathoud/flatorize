# First, time the interpretation of the .scm files:

time scheme_matmul_classic.scm          # Ugly imperative implementation, ported from ../examples.js

real	0m15.628s
user	0m15.577s
sys	0m0.012s

time scheme_matmul_list_of_lists.scm    # Concise functional implementation from rosettacode.org

real	0m6.065s
user	0m6.048s
sys	0m0.000s

time scheme_matmul342.scm               # Proposed "flatorized" implementation for I:3,J:4,K:2

real	0m2.845s
user	0m2.828s
sys	0m0.008s

# Compile them:

( cat scheme_matmul_common.scm ; grep -v load scheme_matmul_classic.scm ) | grep -v gsi-script > tmp.scm
gsc -exe -o scheme_matmul_classic.bin tmp.scm
rm tmp.scm

( cat scheme_matmul_common.scm ; grep -v load scheme_matmul_list_of_lists.scm ) | grep -v gsi-script > tmp.scm
gsc -exe -o scheme_matmul_list_of_lists.bin tmp.scm
rm tmp.scm

( cat scheme_matmul_common.scm ; grep -v load scheme_matmul342.scm ) | grep -v gsi-script > tmp.scm
gsc -exe -o scheme_matmul342.bin tmp.scm
rm tmp.scm

# Done compiling. Now time the binaries:

time scheme_matmul_classic.bin          # Ugly imperative implementation, ported from ../examples.js

real	0m0.726s
user	0m0.712s
sys	0m0.008s

time scheme_matmul_list_of_lists.bin    # Concise functional implementation from rosettacode.org

real	0m2.588s
user	0m2.568s
sys	0m0.012s

time scheme_matmul342.bin               # Proposed "flatorized" implementation for I:3,J:4,K:2

real	0m0.261s
user	0m0.252s
sys	0m0.004s

